<!DOCTYPE html>
<html lang="en">
  <head>
    <title>derdon's blog</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://derdon.github.io/blog/theme/css/main.css" type="text/css">

    <!-- Feeds -->
    <link href="https://derdon.github.io/blog/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="derdon's blog Atom Feed" />
    <link href="https://derdon.github.io/blog/feeds/all.rss.xml"
          type="application/rss+xml" rel="alternate"
          title="derdon's blog RSS Feed" />

    <link href="https://derdon.github.io/blog/feeds/gsoc.rss.xml"
          type="application/rss+xml" rel="alternate"
          title="derdon's blog Categories RSS Feed" />

  </head>
  <body>
    <div id="margins">
      <header id="header">
        <a href="https://derdon.github.io/blog/index.html"><h1 class="strokeme">derdon's blog</h1></a>
      </header>
          <nav>
            <ul>
                <li><a href="https://derdon.github.io/blog/category/gsoc.html">gsoc</a></li> 
                <li><a href="https://derdon.github.io/blog/category/python.html">python</a></li> 
            </ul>
          </nav>
      <div id="main">
        
<article>
  <header>
    <h2 class="entry-title">
      <a href="new-service-for-astroquery-coming-xmatch.html" rel="bookmark" title="Permalink to New service for Astroquery coming: xMatch">
        New service for Astroquery coming: xMatch
      </a>
    </h2>
  </header>
  <time datetime="2014-06-19T00:00:00">
    Thu 19 June 2014
  </time>
  <p class="entry-content">
    <p><a class="reference external" href="http://cdsxmatch.u-strasbg.fr/xmatch">xMatch</a> is a service that makes it possible to cross-identify (thus the
name) sources between very large catalogues. One of these catalogues may
also be a user-uploaded list of positions. For astroquery, I added a new
class, <cite>XMatch</cite>, that has the methods <cite>get_available_tables</cite>,
<cite>is_table_available</cite>, and <cite>query</cite>. <cite>get_available_tables</cite> returns a
listing of all tables that can be queried by this service. The resulting
format can be either <a class="reference external" href="http://json.org">JSON</a> or plain text. In the sample <a class="reference external" href="http://ipython.org">ipython</a> session
below one can see that the number of returned lines is 13259 if the format
is plain text. This means that this many tables can be queried by the
xMatch service. The following commands prints the first 5 tables. The
utility method <cite>is_table_available</cite> simply checks whether the passed
string is one of those that <cite>get_available_tables</cite> returns in the plain
text format. The most interesting method though is <cite>query</cite>. It receives
the following parameters: cat1, cat2, max_distance, format, colRA1,
coldDec1, colRA2, colDec2. cat1 and cat2 are used to identify the first or
the second table to be queried, respectively. max_distance denotes the
maximum distance (in arcsecs) that will be used to look for counterparts.
The desired format can be either <a class="reference external" href="http://www.ivoa.net/documents/REC/VOTable/VOTable-20040811.html">VOTable</a>, <a class="reference external" href="http://json.org">JSON</a>, <a class="reference external" href="http://en.wikipedia.org/wiki/Comma-separated_values">CSV</a>, or <a class="reference external" href="http://en.wikipedia.org/wiki/Tab-separated_values">TSV</a>. The last
four parameters indicate the names of the columns of the respective
tables.</p>
<p>The <a class="reference external" href="http://ipython.org">ipython</a> session below shows the xmatch package &quot;in action&quot;:</p>
<div class="highlight"><pre><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="kn">from</span> <span class="nn">astroquery.xmatch</span> <span class="kn">import</span> <span class="n">XMatch</span>
<span class="n">WARNING</span><span class="p">:</span> <span class="n">ConfigurationDefaultMissingWarning</span><span class="p">:</span> <span class="n">Could</span> <span class="ow">not</span> <span class="n">determine</span> <span class="n">version</span> <span class="n">of</span> <span class="n">package</span> <span class="n">astroquery</span> <span class="n">Cannot</span> <span class="n">install</span> <span class="n">default</span> <span class="n">profile</span><span class="o">.</span> <span class="n">If</span> <span class="n">you</span> <span class="n">are</span> <span class="n">importing</span> <span class="kn">from</span> <span class="nn">source</span><span class="p">,</span> <span class="n">this</span> <span class="ow">is</span> <span class="n">expected</span><span class="o">.</span> <span class="p">[</span><span class="n">astroquery</span><span class="o">.</span><span class="n">_astropy_init</span><span class="p">]</span>
<span class="n">WARNING</span><span class="p">:</span> <span class="n">AstropyDeprecationWarning</span><span class="p">:</span> <span class="n">ConfigurationItem</span> <span class="n">has</span> <span class="n">been</span> <span class="n">deprecated</span> <span class="ow">in</span> <span class="n">astropy</span> <span class="mf">0.4</span><span class="o">.</span> <span class="n">Use</span> <span class="n">ConfigItem</span> <span class="n">objects</span> <span class="k">as</span> <span class="n">members</span> <span class="n">of</span> <span class="n">ConfigNamespace</span> <span class="n">subclasses</span> <span class="n">instead</span><span class="o">.</span>  <span class="n">See</span> <span class="n">ConfigNamespace</span> <span class="k">for</span> <span class="n">an</span> <span class="n">example</span><span class="o">.</span> <span class="p">[</span><span class="n">astropy</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">configuration</span><span class="p">]</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="n">xm</span> <span class="o">=</span> <span class="n">XMatch</span><span class="p">()</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="nb">len</span><span class="p">(</span><span class="n">xm</span><span class="o">.</span><span class="n">get_available_tables</span><span class="p">(</span><span class="s">&#39;txt&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">splitlines</span><span class="p">())</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="mi">13259</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">4</span><span class="p">]:</span> <span class="n">xm</span><span class="o">.</span><span class="n">get_available_tables</span><span class="p">(</span><span class="s">&#39;txt&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()[:</span><span class="mi">5</span><span class="p">]</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">4</span><span class="p">]:</span>
<span class="p">[</span><span class="s">u&#39;J/MNRAS/276/33/tables&#39;</span><span class="p">,</span>
 <span class="s">u&#39;J/A+A/552/A8/tablea1&#39;</span><span class="p">,</span>
 <span class="s">u&#39;J/AJ/80/972/table&#39;</span><span class="p">,</span>
 <span class="s">u&#39;J/A+AS/99/291/table1&#39;</span><span class="p">,</span>
 <span class="s">u&#39;J/ApJS/150/1/table5a&#39;</span><span class="p">]</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">5</span><span class="p">]:</span> <span class="n">xm</span><span class="o">.</span><span class="n">is_table_available</span><span class="p">(</span><span class="s">u&#39;J/AJ/80/972/table&#39;</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">5</span><span class="p">]:</span> <span class="bp">True</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">6</span><span class="p">]:</span> <span class="kn">from</span> <span class="nn">StringIO</span> <span class="kn">import</span> <span class="n">StringIO</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">7</span><span class="p">]:</span> <span class="n">csv_in</span> <span class="o">=</span> <span class="n">StringIO</span><span class="p">(</span><span class="s">&#39;&#39;&#39;ra,dec</span>
<span class="s">267.22029,-20.35869</span>
<span class="s">274.83971,-25.42714</span>
<span class="s">275.92229,-30.36572</span>
<span class="s">283.26621,-8.70756</span>
<span class="s">306.01575,33.86756</span>
<span class="s">322.493,12.16703&#39;&#39;&#39;</span><span class="p">)</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">8</span><span class="p">]:</span> <span class="n">csv_out</span> <span class="o">=</span> <span class="n">xm</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">csv_in</span><span class="p">,</span> <span class="s">&#39;vizier:II/246/out&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s">&#39;csv&#39;</span><span class="p">,</span> <span class="s">&#39;ra&#39;</span><span class="p">,</span> <span class="s">&#39;dec&#39;</span><span class="p">)</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">9</span><span class="p">]:</span> <span class="k">print</span> <span class="n">csv_out</span>
<span class="n">angDist</span><span class="p">,</span><span class="n">ra</span><span class="p">,</span><span class="n">dec</span><span class="p">,</span><span class="mi">2</span><span class="n">MASS</span><span class="p">,</span><span class="n">RAJ2000</span><span class="p">,</span><span class="n">DEJ2000</span><span class="p">,</span><span class="n">errHalfMaj</span><span class="p">,</span><span class="n">errHalfMin</span><span class="p">,</span><span class="n">errPosAng</span><span class="p">,</span><span class="n">Jmag</span><span class="p">,</span><span class="n">Hmag</span><span class="p">,</span><span class="n">Kmag</span><span class="p">,</span><span class="n">e_Jmag</span><span class="p">,</span><span class="n">e_Hmag</span><span class="p">,</span><span class="n">e_Kmag</span><span class="p">,</span><span class="n">Qfl</span><span class="p">,</span><span class="n">Rfl</span><span class="p">,</span><span class="n">X</span><span class="p">,</span><span class="n">MeasureJD</span>
<span class="mf">1.352044</span><span class="p">,</span><span class="mf">267.22029</span><span class="p">,</span><span class="o">-</span><span class="mf">20.35869</span><span class="p">,</span><span class="mi">17485281</span><span class="o">-</span><span class="mi">2021323</span><span class="p">,</span><span class="mf">267.220049</span><span class="p">,</span><span class="o">-</span><span class="mf">20.358990</span><span class="p">,</span><span class="mf">0.150</span><span class="p">,</span><span class="mf">0.110</span><span class="p">,</span><span class="mi">16</span><span class="p">,</span><span class="mf">9.931</span><span class="p">,</span><span class="mf">8.822</span><span class="p">,</span><span class="mf">7.550</span><span class="p">,</span><span class="mf">0.239</span><span class="p">,</span><span class="mf">0.241</span><span class="p">,,</span><span class="n">EEU</span><span class="p">,</span><span class="mi">226</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mf">2450950.8609</span>
<span class="mf">1.578188</span><span class="p">,</span><span class="mf">267.22029</span><span class="p">,</span><span class="o">-</span><span class="mf">20.35869</span><span class="p">,</span><span class="mi">17485288</span><span class="o">-</span><span class="mi">2021328</span><span class="p">,</span><span class="mf">267.220348</span><span class="p">,</span><span class="o">-</span><span class="mf">20.359125</span><span class="p">,</span><span class="mf">0.140</span><span class="p">,</span><span class="mf">0.120</span><span class="p">,</span><span class="mi">158</span><span class="p">,</span><span class="mf">8.868</span><span class="p">,</span><span class="mf">7.784</span><span class="p">,</span><span class="mf">8.530</span><span class="p">,,,</span><span class="mf">0.128</span><span class="p">,</span><span class="n">UUB</span><span class="p">,</span><span class="mi">662</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mf">2450950.8609</span>
<span class="mf">3.699368</span><span class="p">,</span><span class="mf">267.22029</span><span class="p">,</span><span class="o">-</span><span class="mf">20.35869</span><span class="p">,</span><span class="mi">17485264</span><span class="o">-</span><span class="mi">2021294</span><span class="p">,</span><span class="mf">267.219344</span><span class="p">,</span><span class="o">-</span><span class="mf">20.358171</span><span class="p">,</span><span class="mf">0.130</span><span class="p">,</span><span class="mf">0.120</span><span class="p">,</span><span class="mi">33</span><span class="p">,</span><span class="mf">9.562</span><span class="p">,</span><span class="mf">8.525</span><span class="p">,</span><span class="mf">9.445</span><span class="p">,,,</span><span class="mf">0.119</span><span class="p">,</span><span class="n">UUB</span><span class="p">,</span><span class="mi">662</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mf">2450950.8609</span>
<span class="mf">3.822922</span><span class="p">,</span><span class="mf">267.22029</span><span class="p">,</span><span class="o">-</span><span class="mf">20.35869</span><span class="p">,</span><span class="mi">17485299</span><span class="o">-</span><span class="mi">2021279</span><span class="p">,</span><span class="mf">267.220825</span><span class="p">,</span><span class="o">-</span><span class="mf">20.357754</span><span class="p">,</span><span class="mf">0.080</span><span class="p">,</span><span class="mf">0.070</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mf">10.756</span><span class="p">,</span><span class="mf">9.725</span><span class="p">,</span><span class="mf">9.287</span><span class="p">,</span><span class="mf">0.139</span><span class="p">,</span><span class="mf">0.127</span><span class="p">,</span><span class="mf">0.103</span><span class="p">,</span><span class="n">EBA</span><span class="p">,</span><span class="mi">222</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mf">2450950.8609</span>
<span class="mf">4.576677</span><span class="p">,</span><span class="mf">267.22029</span><span class="p">,</span><span class="o">-</span><span class="mf">20.35869</span><span class="p">,</span><span class="mi">17485255</span><span class="o">-</span><span class="mi">2021326</span><span class="p">,</span><span class="mf">267.218994</span><span class="p">,</span><span class="o">-</span><span class="mf">20.359064</span><span class="p">,</span><span class="mf">0.140</span><span class="p">,</span><span class="mf">0.130</span><span class="p">,</span><span class="mi">87</span><span class="p">,</span><span class="mf">10.431</span><span class="p">,</span><span class="mf">9.348</span><span class="p">,</span><span class="mf">7.926</span><span class="p">,</span><span class="mf">0.159</span><span class="p">,</span><span class="mf">0.316</span><span class="p">,,</span><span class="n">CEU</span><span class="p">,</span><span class="mi">226</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mf">2450950.8609</span>
<span class="mf">0.219609</span><span class="p">,</span><span class="mf">274.83971</span><span class="p">,</span><span class="o">-</span><span class="mf">25.42714</span><span class="p">,</span><span class="mi">18192154</span><span class="o">-</span><span class="mi">2525377</span><span class="p">,</span><span class="mf">274.839773</span><span class="p">,</span><span class="o">-</span><span class="mf">25.427162</span><span class="p">,</span><span class="mf">0.060</span><span class="p">,</span><span class="mf">0.060</span><span class="p">,</span><span class="mi">90</span><span class="p">,</span><span class="mf">9.368</span><span class="p">,</span><span class="mf">8.431</span><span class="p">,</span><span class="mf">7.919</span><span class="p">,</span><span class="mf">0.024</span><span class="p">,</span><span class="mf">0.044</span><span class="p">,</span><span class="mf">0.036</span><span class="p">,</span><span class="n">AAA</span><span class="p">,</span><span class="mi">211</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">2451407.5033</span>
<span class="mf">1.633225</span><span class="p">,</span><span class="mf">275.92229</span><span class="p">,</span><span class="o">-</span><span class="mf">30.36572</span><span class="p">,</span><span class="mi">18234133</span><span class="o">-</span><span class="mi">3021582</span><span class="p">,</span><span class="mf">275.922233</span><span class="p">,</span><span class="o">-</span><span class="mf">30.366171</span><span class="p">,</span><span class="mf">0.080</span><span class="p">,</span><span class="mf">0.080</span><span class="p">,</span><span class="mi">55</span><span class="p">,</span><span class="mf">12.947</span><span class="p">,</span><span class="mf">12.334</span><span class="p">,</span><span class="mf">12.145</span><span class="p">,</span><span class="mf">0.156</span><span class="p">,</span><span class="mf">0.221</span><span class="p">,</span><span class="mf">0.127</span><span class="p">,</span><span class="n">EEE</span><span class="p">,</span><span class="mi">222</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mf">2451021.7212</span>
<span class="mf">0.536998</span><span class="p">,</span><span class="mf">283.26621</span><span class="p">,</span><span class="o">-</span><span class="mf">8.70756</span><span class="p">,</span><span class="mi">18530390</span><span class="o">-</span><span class="mi">0842276</span><span class="p">,</span><span class="mf">283.266284</span><span class="p">,</span><span class="o">-</span><span class="mf">8.707690</span><span class="p">,</span><span class="mf">0.060</span><span class="p">,</span><span class="mf">0.060</span><span class="p">,</span><span class="mi">45</span><span class="p">,</span><span class="mf">12.182</span><span class="p">,</span><span class="mf">11.534</span><span class="p">,</span><span class="mf">11.380</span><span class="p">,</span><span class="mf">0.057</span><span class="p">,</span><span class="mf">0.071</span><span class="p">,</span><span class="mf">0.063</span><span class="p">,</span><span class="n">AAA</span><span class="p">,</span><span class="mi">222</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">2451301.7945</span>
<span class="mf">1.178542</span><span class="p">,</span><span class="mf">306.01575</span><span class="p">,</span><span class="mf">33.86756</span><span class="p">,</span><span class="mi">20240382</span><span class="o">+</span><span class="mi">3352021</span><span class="p">,</span><span class="mf">306.015944</span><span class="p">,</span><span class="o">+</span><span class="mf">33.867275</span><span class="p">,</span><span class="mf">0.060</span><span class="p">,</span><span class="mf">0.060</span><span class="p">,</span><span class="mi">90</span><span class="p">,</span><span class="mf">13.575</span><span class="p">,</span><span class="mf">12.684</span><span class="p">,</span><span class="mf">12.321</span><span class="p">,</span><span class="mf">0.025</span><span class="p">,</span><span class="mf">0.027</span><span class="p">,</span><span class="mf">0.026</span><span class="p">,</span><span class="n">AAA</span><span class="p">,</span><span class="mi">222</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">2450948.9708</span>
<span class="mf">0.853178</span><span class="p">,</span><span class="mf">322.493</span><span class="p">,</span><span class="mf">12.16703</span><span class="p">,</span><span class="mi">21295836</span><span class="o">+</span><span class="mi">1210007</span><span class="p">,</span><span class="mf">322.493171</span><span class="p">,</span><span class="o">+</span><span class="mf">12.166862</span><span class="p">,</span><span class="mf">0.100</span><span class="p">,</span><span class="mf">0.080</span><span class="p">,</span><span class="mi">179</span><span class="p">,</span><span class="mf">9.798</span><span class="p">,</span><span class="mf">9.339</span><span class="p">,</span><span class="mf">9.176</span><span class="p">,</span><span class="mf">0.109</span><span class="p">,</span><span class="mf">0.150</span><span class="p">,</span><span class="mf">0.100</span><span class="p">,</span><span class="n">EEA</span><span class="p">,</span><span class="mi">222</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">2451080.6935</span>
<span class="mf">4.503950</span><span class="p">,</span><span class="mf">322.493</span><span class="p">,</span><span class="mf">12.16703</span><span class="p">,</span><span class="mi">21295861</span><span class="o">+</span><span class="mi">1210023</span><span class="p">,</span><span class="mf">322.494242</span><span class="p">,</span><span class="o">+</span><span class="mf">12.167332</span><span class="p">,</span><span class="mf">0.100</span><span class="p">,</span><span class="mf">0.080</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">10.057</span><span class="p">,</span><span class="mf">9.720</span><span class="p">,</span><span class="mf">9.483</span><span class="p">,</span><span class="mf">0.077</span><span class="p">,</span><span class="mf">0.136</span><span class="p">,</span><span class="mf">0.088</span><span class="p">,</span><span class="n">EEE</span><span class="p">,</span><span class="mi">222</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">2451080.6935</span>
</pre></div>
<p>Note that the status of this package is that the pull request is still
open and things will change because I haven't reacted to all the comments
yet.</p>
<div class="section" id="what-s-next">
<h2>What's next?</h2>
<p>I started working on the next service, <a class="reference external" href="http://skyview.gsfc.nasa.gov/current/cgi/titlepage.pl">SkyView</a>. Yet it is not enough to
open a new PR about it, but I have some concrete plans on how to continue
on it. Stay tuned!</p>
</div>

  </p>
</article>
      </div>
      <footer>
        © by Simon Liedtke • 
        Powered by <a href="http://docs.notmyidea.org/alexis/pelican/">pelican</a>.
      </footer>
    </div>
  </body>
</html>